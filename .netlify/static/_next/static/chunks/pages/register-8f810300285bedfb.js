(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{143:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(7876),a=r(4232),n=r(7328),o=r.n(n),l=r(2982),i=r(9099);function c(){let e=(0,i.useRouter)(),[s,r]=(0,a.useState)(""),[n,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),v=async r=>{r.preventDefault(),p(null),x(!0),f(!1);try{let{data:r,error:t}=await l.N.auth.signUp({email:s,password:n,options:{data:{role:"invitado",name:d}}});if(t||!r.user){p((null==t?void 0:t.message)||"Error al registrar usuario"),x(!1);return}let{error:a}=await l.N.from("users").insert({id:r.user.id,nombre:d||s.split("@")[0],rol:"invitado"});a&&console.error("Error creando perfil en users:",a),r.session&&(localStorage.setItem("supabase.auth.token",JSON.stringify({currentSession:r.session})),console.log("Sesi\xf3n creada autom\xe1ticamente")),f(!0),setTimeout(()=>e.push("/"),2e3)}catch(e){console.error("Error en registro:",e),p("Error inesperado: ".concat(e.message))}finally{x(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{children:(0,t.jsx)("title",{children:"Registro - Sof\xeda & Franco"})}),(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-6 bg-blush/10 bg-[url('/texture.svg')] bg-repeat",children:(0,t.jsxs)("div",{className:"w-full max-w-md overflow-hidden rounded-2xl shadow-xl",children:[(0,t.jsxs)("div",{className:"bg-dusk text-white py-6 px-8",children:[(0,t.jsx)("h1",{className:"font-display text-3xl text-center",children:"Registro"}),(0,t.jsx)("p",{className:"text-center text-sm text-white/70 mt-2",children:"Boda de Sof\xeda & Franco"})]}),(0,t.jsxs)("form",{onSubmit:v,className:"p-8 bg-white space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("input",{id:"name",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",name:"name",type:"text",placeholder:"Nombre completo",value:d,onChange:e=>u(e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electr\xf3nico"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,t.jsx)("input",{id:"email",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",name:"email",type:"email",placeholder:"email@example.com",value:s,onChange:e=>r(e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,t.jsx)("input",{id:"password",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent",name:"password",type:"password",placeholder:"Contrase\xf1a (m\xednimo 6 caracteres)",value:n,onChange:e=>c(e.target.value),required:!0,minLength:6})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"La contrase\xf1a debe tener al menos 6 caracteres"})]}),(0,t.jsx)("button",{type:"submit",className:"w-full py-3 px-4 rounded-lg bg-gold text-dusk font-medium hover:bg-gold/90 transition-colors duration-200 flex items-center justify-center shadow-sm",disabled:m,children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-dusk",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Registrando..."]}):"Crear Cuenta"}),h&&(0,t.jsx)("div",{className:"bg-red-50 text-red-800 p-3 rounded-lg text-sm",children:h}),g&&(0,t.jsx)("div",{className:"bg-green-50 text-green-800 p-3 rounded-lg text-sm",children:"Registro exitoso. Redirigiendo..."}),(0,t.jsx)("div",{className:"flex justify-center items-center",children:(0,t.jsx)("a",{href:"/login",className:"text-sm text-gold hover:text-dusk transition-colors duration-200",children:"\xbfYa tienes cuenta? Inicia sesi\xf3n aqu\xed"})})]})]})})]})}},2790:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(143)}])},7328:(e,s,r)=>{e.exports=r(9269)},9099:(e,s,r)=>{e.exports=r(6296)}},e=>{e.O(0,[636,593,792],()=>e(e.s=2790)),_N_E=e.O()}]);